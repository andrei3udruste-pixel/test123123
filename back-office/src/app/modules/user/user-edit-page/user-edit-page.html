<mat-card class="max-w-xl mx-auto p-4">
  <mat-card-title>
    <p class="p-3 mb-1 text-3xl md:text-4xl">
      {{ 'user.edit.title' | translate }}
    </p>
  </mat-card-title>

  <mat-card-content>

    @if (loading) {
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    }

    @if (!loading) {

      <div class="flex flex-col gap-3 mb-6 text-sm">
        <div class="grid grid-cols-1 md:grid-cols-[140px_1fr] items-center gap-2">
          <span class="font-medium opacity-70">ID</span>
          <span>{{ user.id }}</span>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-[140px_1fr] items-center gap-2">
          <span class="font-medium opacity-70">Username</span>
          <span>{{ user.username }}</span>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-[140px_1fr] items-center gap-2">
          <span class="font-medium opacity-70">Email</span>
          <span>{{ user.email }}</span>
        </div>
      </div>

      <form [formGroup]="form" class="flex flex-col gap-4">

        <mat-checkbox formControlName="enabled">
          {{ 'user.enabled' | translate }}
        </mat-checkbox>

        <mat-checkbox formControlName="locked">
          {{ 'user.locked' | translate }}
        </mat-checkbox>

        <mat-form-field appearance="outline">
          <mat-label>{{ 'user.roles' | translate }}</mat-label>
          <mat-select formControlName="roles" multiple>
            @for (role of roles; track role) {
              <mat-option [value]="role">{{ role }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <div class="flex justify-end gap-3">
          <button
            mat-stroked-button
            type="button"
            [routerLink]="['/user']">
            {{ 'actions.cancel' | translate }}
          </button>

          <button
            mat-flat-button
            color="primary"
            type="button"
            (click)="save()">
            {{ 'actions.save' | translate }}
          </button>
        </div>

      </form>
    }

  </mat-card-content>
</mat-card>
