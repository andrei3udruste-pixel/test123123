<mat-card class="page-card">
  <mat-card-title>
    {{ 'user.edit.title' | translate }}
  </mat-card-title>

  <mat-card-content>

    @if (loading) {
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    }

    @if (!loading) {

      <div class="user-info">
        <div><strong>ID:</strong> {{ user.id }}</div>
        <div><strong>Username:</strong> {{ user.username }}</div>
        <div><strong>Email:</strong> {{ user.email }}</div>
      </div>

      <form [formGroup]="form" class="form">

        <mat-checkbox formControlName="enabled">
          {{ 'user.enabled' | translate }}
        </mat-checkbox>

        <mat-checkbox formControlName="locked">
          {{ 'user.locked' | translate }}
        </mat-checkbox>

        <mat-form-field appearance="outline">
          <mat-label>{{ 'user.roles' | translate }}</mat-label>
          <mat-select formControlName="roles" multiple>
            @for (role of roles; track role) {
              <mat-option [value]="role">{{ role }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <div class="actions">
          <button
            mat-stroked-button
            type="button"
            [routerLink]="['/user']">
            {{ 'actions.cancel' | translate }}
          </button>

          <button
            mat-flat-button
            color="primary"
            type="button"
            (click)="save()">
            {{ 'actions.save' | translate }}
          </button>
        </div>

      </form>
    }

  </mat-card-content>
</mat-card>
